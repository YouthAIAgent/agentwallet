<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AgentWallet Protocol â€” API Documentation</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0a;--surface:#111;--border:#1a1a1a;--green:#00ff41;--cyan:#00d4ff;--magenta:#ff2a6d;--purple:#b44aff;--yellow:#f0c040;--dim:#555;--text:#ccc;--white:#eee;--sidebar-w:260px}
html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:var(--green) var(--bg)}
body{font-family:'JetBrains Mono',monospace;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
/* CRT overlay */
body::after{content:'';position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,65,.015) 2px,rgba(0,255,65,.015) 4px)}
/* Sidebar */
.sidebar{position:fixed;top:0;left:0;width:var(--sidebar-w);height:100vh;background:rgba(10,10,10,.97);border-right:1px solid var(--border);padding:20px 0;overflow-y:auto;z-index:100;transition:transform .3s}
.sidebar-logo{padding:10px 20px 20px;border-bottom:1px solid var(--border);margin-bottom:12px}
.sidebar-logo h2{font-size:14px;color:var(--green);text-transform:uppercase;letter-spacing:2px}
.sidebar-logo span{font-size:10px;color:var(--dim);display:block;margin-top:2px}
.sidebar nav a{display:block;padding:7px 20px;font-size:11px;color:var(--dim);text-decoration:none;border-left:2px solid transparent;transition:all .2s}
.sidebar nav a:hover,.sidebar nav a.active{color:var(--green);border-left-color:var(--green);background:rgba(0,255,65,.03)}
.sidebar nav .sep{height:1px;background:var(--border);margin:8px 20px}
/* Mobile toggle */
.menu-toggle{display:none;position:fixed;top:12px;left:12px;z-index:200;background:var(--surface);border:1px solid var(--border);color:var(--green);font-family:inherit;font-size:18px;padding:6px 10px;cursor:pointer;border-radius:4px}
/* Main */
.main{margin-left:var(--sidebar-w);padding:40px 50px 100px}
section{margin-bottom:60px}
h1{font-size:28px;color:var(--green);margin-bottom:6px;text-shadow:0 0 20px rgba(0,255,65,.3)}
.subtitle{font-size:12px;color:var(--dim);margin-bottom:40px}
h2{font-size:20px;color:var(--cyan);margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid var(--border)}
h3{font-size:15px;color:var(--white);margin:24px 0 10px}
h4{font-size:13px;color:var(--purple);margin:16px 0 8px}
p,li{font-size:12px;margin-bottom:8px}
ul{padding-left:18px}
a{color:var(--cyan);text-decoration:none}
a:hover{text-decoration:underline}
/* Cards */
.card{background:rgba(17,17,17,.7);border:1px solid var(--border);border-radius:8px;padding:20px;margin-bottom:16px;backdrop-filter:blur(10px);position:relative;overflow:hidden}
/* Method badges */
.method{display:inline-block;padding:2px 8px;border-radius:3px;font-size:10px;font-weight:700;letter-spacing:1px;margin-right:8px;vertical-align:middle}
.method-get{background:rgba(0,255,65,.15);color:var(--green);border:1px solid rgba(0,255,65,.3)}
.method-post{background:rgba(0,212,255,.15);color:var(--cyan);border:1px solid rgba(0,212,255,.3)}
.method-patch{background:rgba(240,192,64,.15);color:var(--yellow);border:1px solid rgba(240,192,64,.3)}
.method-delete{background:rgba(255,42,109,.15);color:var(--magenta);border:1px solid rgba(255,42,109,.3)}
.endpoint-path{font-size:13px;color:var(--white);vertical-align:middle}
.endpoint-desc{font-size:11px;color:var(--dim);margin:6px 0 12px}
/* Code blocks */
.code-wrap{position:relative;margin:12px 0 16px;border-radius:6px;overflow:hidden;border:1px solid var(--border)}
.code-header{background:#161616;padding:6px 12px;font-size:10px;color:var(--dim);display:flex;justify-content:space-between;align-items:center}
.code-header .lang{color:var(--purple)}
.copy-btn{background:none;border:1px solid var(--border);color:var(--dim);font-family:inherit;font-size:10px;padding:2px 8px;cursor:pointer;border-radius:3px;transition:all .2s}
.copy-btn:hover{color:var(--green);border-color:var(--green)}
pre{background:#0d0d0d;padding:14px;overflow-x:auto;font-size:11.5px;line-height:1.7;counter-reset:line}
pre code{color:var(--green)}
.kw{color:var(--magenta)}
.str{color:var(--yellow)}
.cmt{color:var(--dim);font-style:italic}
.fn{color:var(--cyan)}
.num{color:var(--purple)}
.ln{color:#333;user-select:none;margin-right:16px;display:inline-block;width:20px;text-align:right}
/* ASCII diagram */
.ascii{background:#0d0d0d;border:1px solid var(--border);border-radius:6px;padding:16px;font-size:11px;color:var(--cyan);overflow-x:auto;white-space:pre;line-height:1.5;margin:12px 0}
/* Search modal */
.search-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:500;align-items:flex-start;justify-content:center;padding-top:120px}
.search-overlay.open{display:flex}
.search-box{background:var(--surface);border:1px solid var(--green);border-radius:8px;width:500px;max-width:90vw;padding:16px;box-shadow:0 0 40px rgba(0,255,65,.1)}
.search-box input{width:100%;background:transparent;border:none;outline:none;color:var(--green);font-family:inherit;font-size:14px}
.search-box .hint{font-size:10px;color:var(--dim);margin-top:8px}
.search-results{margin-top:10px;max-height:240px;overflow-y:auto}
.search-results a{display:block;padding:6px 8px;font-size:12px;color:var(--text);border-radius:4px}
.search-results a:hover{background:rgba(0,255,65,.08);color:var(--green);text-decoration:none}
/* Back to top */
.btt{position:fixed;bottom:24px;right:24px;width:40px;height:40px;border-radius:50%;background:var(--surface);border:1px solid var(--green);color:var(--green);font-size:18px;cursor:pointer;display:none;align-items:center;justify-content:center;z-index:100;transition:all .2s;font-family:inherit}
.btt:hover{background:var(--green);color:var(--bg)}
/* Table */
.tbl{width:100%;border-collapse:collapse;font-size:11px;margin:12px 0}
.tbl th{text-align:left;padding:8px;border-bottom:1px solid var(--border);color:var(--cyan);font-weight:600}
.tbl td{padding:8px;border-bottom:1px solid var(--border);color:var(--text)}
.tbl tr:hover td{background:rgba(0,255,65,.02)}
/* Canvas */
#matrix{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;opacity:.06}
/* Responsive */
@media(max-width:768px){
  .sidebar{transform:translateX(-100%)}
  .sidebar.open{transform:translateX(0)}
  .menu-toggle{display:block}
  .main{margin-left:0;padding:60px 16px 80px}
}
/* ENHANCED HACKER EFFECTS */
#particles{position:fixed;inset:0;z-index:-1;opacity:.25;pointer-events:none}
.grid-overlay{position:fixed;inset:0;z-index:-1;pointer-events:none;background-image:linear-gradient(rgba(0,255,65,.02) 1px,transparent 1px),linear-gradient(90deg,rgba(0,255,65,.02) 1px,transparent 1px);background-size:60px 60px}
#scroll-prog{position:fixed;top:0;left:0;height:3px;z-index:10001;background:linear-gradient(90deg,#00ff41,#00d4ff,#e040fb,#a855f7,#ffcc00);width:0;transition:width .15s}
body{animation:flk 10s infinite}
@keyframes flk{0%,100%{opacity:1}92%{opacity:1}93%{opacity:.85}94%{opacity:1}96%{opacity:.92}97%{opacity:1}}
@keyframes scanl{0%{transform:translateY(0)}100%{transform:translateY(4px)}}
body::after{animation:scanl .1s linear infinite}
#boot-overlay{position:fixed;inset:0;z-index:10000;background:#0a0a0a;display:flex;align-items:center;justify-content:center;transition:opacity .8s,visibility .8s}
#boot-overlay.done{opacity:0;visibility:hidden;pointer-events:none}
#boot-inner{max-width:600px;width:90%;padding:30px;font-size:12px}
.boot-line{opacity:0;margin-bottom:3px;white-space:pre;transition:opacity .3s}
.boot-line.visible{opacity:1}
.boot-line .tag-ok{color:#00ff41;font-weight:700}
.boot-line .tag-init{color:#ffcc00}
.boot-line .tag-sys{color:#00d4ff}
.boot-line .tag-load{color:#e040fb}
h1{position:relative}
h1::before,h1::after{content:'> AgentWallet Protocol';position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}
h1::before{color:#00d4ff;z-index:-1;animation:g1 3s infinite linear alternate-reverse;clip-path:inset(0 0 65% 0)}
h1::after{color:#e040fb;z-index:-2;animation:g2 2.5s infinite linear alternate-reverse;clip-path:inset(40% 0 0 0)}
@keyframes g1{0%,100%{transform:translate(0)}20%{transform:translate(-2px,1px)}40%{transform:translate(2px,-1px)}60%{transform:translate(-1px,1px)}80%{transform:translate(1px,-1px)}}
@keyframes g2{0%,100%{transform:translate(0)}20%{transform:translate(1px,-1px)}40%{transform:translate(-2px,1px)}60%{transform:translate(2px,1px)}80%{transform:translate(-1px,-1px)}}
.card{transition:all .3s;border-left:3px solid transparent}
.card:hover{border-left-color:var(--green);box-shadow:0 0 20px rgba(0,255,65,.08);transform:translateX(4px)}
.card::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:2px;background:linear-gradient(90deg,transparent,var(--green),transparent);animation:scanCard 4s linear infinite}
@keyframes scanCard{0%{left:-100%}100%{left:100%}}
.sidebar nav a{position:relative;overflow:hidden}
.sidebar nav a::before{content:'>';position:absolute;left:6px;opacity:0;color:var(--green);transition:all .2s}
.sidebar nav a:hover::before,.sidebar nav a.active::before{opacity:1}
.sidebar nav a:hover,.sidebar nav a.active{padding-left:28px}
h2{position:relative;overflow:hidden}
h2::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:1px;background:linear-gradient(90deg,var(--cyan),transparent);animation:h2scan 3s ease infinite}
@keyframes h2scan{0%,100%{opacity:.3}50%{opacity:1}}
.method{position:relative;overflow:hidden}
.method::after{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:methodShine 3s ease infinite}
@keyframes methodShine{0%{left:-100%}50%{left:100%}100%{left:100%}}
pre{position:relative}
pre::before{content:'';position:absolute;top:0;right:0;width:40px;height:100%;background:linear-gradient(90deg,transparent,rgba(0,255,65,.02));pointer-events:none}
.sidebar-logo h2{text-shadow:0 0 10px rgba(0,255,65,.5),0 0 30px rgba(0,255,65,.2)}
.btt{box-shadow:0 0 15px rgba(0,255,65,.15)}
.btt:hover{box-shadow:0 0 25px rgba(0,255,65,.4)}
@keyframes tGlitch{0%,100%{opacity:1;transform:translate(0)}33%{opacity:.8;transform:translate(-2px,1px);filter:hue-rotate(90deg)}66%{opacity:.9;transform:translate(1px,-1px)}}
</style>
</head>
<body>

<canvas id="matrix"></canvas>
<canvas id="particles"></canvas>
<div class="grid-overlay"></div>
<div id="scroll-prog"></div>
<div id="boot-overlay"><div id="boot-inner">
<div class="boot-line"><span class="tag-sys">[SYS]</span> AgentWallet Docs v0.4.0</div>
<div class="boot-line"><span class="tag-init">[INIT]</span> Loading API reference...</div>
<div class="boot-line"><span class="tag-ok">[OK]</span> 88+ endpoints indexed</div>
<div class="boot-line"><span class="tag-ok">[OK]</span> 16 router groups loaded</div>
<div class="boot-line"><span class="tag-load">[LOAD]</span> MCP tools database: 27 entries</div>
<div class="boot-line"><span class="tag-ok">[OK]</span> PDA Wallets: BETA LIVE on Solana Devnet</div>
<div class="boot-line"><span class="tag-ok">[OK]</span> Documentation ready. Welcome, Agent.</div>
</div></div>

<button class="menu-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">&#9776;</button>

<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <h2>&gt;_ AgentWallet</h2>
    <span>Protocol Docs v0.4.0</span>
  </div>
  <nav id="sidebar-nav">
    <a href="#getting-started">Getting Started</a>
    <a href="#authentication">Authentication</a>
    <div class="sep"></div>
    <a href="#agents">Agents API</a>
    <a href="#wallets">Wallets API</a>
    <a href="#transactions">Transactions API</a>
    <a href="#escrow">Escrow API</a>
    <a href="#policies">Policies API</a>
    <div class="sep"></div>
    <a href="#analytics">Analytics &amp; Compliance</a>
    <a href="#webhooks">Webhooks</a>
    <a href="#marketplace">Marketplace &amp; x402</a>
    <div class="sep"></div>
    <a href="#pda-wallets" style="color:#00d4ff">PDA Wallets (Beta)</a>
    <div class="sep"></div>
    <a href="#mcp-tools">MCP Tools</a>
    <a href="#sdks">SDKs</a>
  </nav>
</aside>

<main class="main">

<h1>&gt; AgentWallet Protocol</h1>
<p class="subtitle">API Reference &amp; Developer Documentation &mdash; v0.4.0 &nbsp;|&nbsp; Press <kbd style="border:1px solid var(--border);padding:1px 5px;border-radius:3px;font-size:10px">Ctrl+K</kbd> to search</p>

<!-- ========== GETTING STARTED ========== -->
<section id="getting-started">
<h2>// Getting Started</h2>

<h3>Install the SDK</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>pip install aw-protocol-sdk==0.4.0</code></pre></div>

<h3>Quick Start</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln"> 1</span><span class="kw">from</span> agentwallet <span class="kw">import</span> AgentWallet
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kw">async with</span> <span class="fn">AgentWallet</span>(api_key=<span class="str">"aw_live_..."</span>) <span class="kw">as</span> aw:
<span class="ln"> 4</span>    <span class="cmt"># Create an AI agent</span>
<span class="ln"> 5</span>    agent = <span class="kw">await</span> aw.agents.<span class="fn">create</span>(name=<span class="str">"my-bot"</span>)
<span class="ln"> 6</span>
<span class="ln"> 7</span>    <span class="cmt"># Get its auto-provisioned wallet</span>
<span class="ln"> 8</span>    wallet = (<span class="kw">await</span> aw.wallets.<span class="fn">list</span>(agent_id=agent.id)).data[<span class="num">0</span>]
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="cmt"># Transfer SOL</span>
<span class="ln">11</span>    tx = <span class="kw">await</span> aw.transactions.<span class="fn">transfer_sol</span>(
<span class="ln">12</span>        from_wallet=wallet.id,
<span class="ln">13</span>        to_address=<span class="str">"..."</span>,
<span class="ln">14</span>        amount_sol=<span class="num">0.5</span>
<span class="ln">15</span>    )</code></pre></div>

<h3>Self-Hosted Deployment</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>git clone https://github.com/YouthAIAgent/agentwallet.git
<span class="ln">2</span><span class="kw">cd</span> protocol
<span class="ln">3</span>docker compose up</code></pre></div>

<h3>Live API</h3>
<div class="card">
<p>Production endpoint:</p>
<p style="color:var(--green);margin-top:4px">https://api.agentwallet.fun</p>
<p style="color:var(--dim);margin-top:6px;font-size:11px">88+ endpoints &bull; 16 router groups &bull; Solana + EVM</p>
</div>
</section>

<!-- ========== AUTHENTICATION ========== -->
<section id="authentication">
<h2>// Authentication</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/auth/register</span></p>
<p class="endpoint-desc">Register a new account. Returns user object and access token.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"email"</span>: <span class="str">"dev@example.com"</span>,
<span class="ln">3</span>  <span class="cyan">"password"</span>: <span class="str">"s3cure_p@ss"</span>,
<span class="ln">4</span>  <span class="cyan">"name"</span>: <span class="str">"Alice"</span>
<span class="ln">5</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"user"</span>: { <span class="cyan">"id"</span>: <span class="str">"usr_abc123"</span>, <span class="cyan">"email"</span>: <span class="str">"dev@example.com"</span> },
<span class="ln">3</span>  <span class="cyan">"access_token"</span>: <span class="str">"eyJhbG..."</span>,
<span class="ln">4</span>  <span class="cyan">"token_type"</span>: <span class="str">"bearer"</span>
<span class="ln">5</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/auth/login</span></p>
<p class="endpoint-desc">Authenticate and receive a JWT access token.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"email"</span>: <span class="str">"dev@example.com"</span>,
<span class="ln">3</span>  <span class="cyan">"password"</span>: <span class="str">"s3cure_p@ss"</span>
<span class="ln">4</span>}</code></pre></div>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"access_token"</span>: <span class="str">"eyJhbG..."</span>,
<span class="ln">3</span>  <span class="cyan">"token_type"</span>: <span class="str">"bearer"</span>,
<span class="ln">4</span>  <span class="cyan">"expires_in"</span>: <span class="num">3600</span>
<span class="ln">5</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/auth/api-keys</span></p>
<p class="endpoint-desc">Generate a long-lived API key for programmatic access. Pass as <code>Authorization: Bearer aw_live_...</code> header.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"name"</span>: <span class="str">"production-key"</span>,
<span class="ln">3</span>  <span class="cyan">"scopes"</span>: [<span class="str">"agents:write"</span>, <span class="str">"wallets:read"</span>, <span class="str">"transactions:write"</span>]
<span class="ln">4</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"id"</span>: <span class="str">"key_xyz"</span>,
<span class="ln">3</span>  <span class="cyan">"api_key"</span>: <span class="str">"aw_live_k8f2..."</span>,
<span class="ln">4</span>  <span class="cyan">"name"</span>: <span class="str">"production-key"</span>,
<span class="ln">5</span>  <span class="cyan">"created_at"</span>: <span class="str">"2026-02-12T10:00:00Z"</span>
<span class="ln">6</span>}</code></pre></div>
</div>
</section>

<!-- ========== AGENTS ========== -->
<section id="agents">
<h2>// Agents API</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/agents</span></p>
<p class="endpoint-desc">Create a new AI agent. A Solana wallet is automatically provisioned.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"name"</span>: <span class="str">"trading-bot-alpha"</span>,
<span class="ln">3</span>  <span class="cyan">"type"</span>: <span class="str">"trading"</span>,
<span class="ln">4</span>  <span class="cyan">"metadata"</span>: { <span class="cyan">"model"</span>: <span class="str">"gpt-4"</span>, <span class="cyan">"version"</span>: <span class="str">"1.0"</span> }
<span class="ln">5</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"id"</span>: <span class="str">"agt_a1b2c3"</span>,
<span class="ln">3</span>  <span class="cyan">"name"</span>: <span class="str">"trading-bot-alpha"</span>,
<span class="ln">4</span>  <span class="cyan">"type"</span>: <span class="str">"trading"</span>,
<span class="ln">5</span>  <span class="cyan">"status"</span>: <span class="str">"active"</span>,
<span class="ln">6</span>  <span class="cyan">"wallet_id"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">7</span>  <span class="cyan">"created_at"</span>: <span class="str">"2026-02-12T10:00:00Z"</span>
<span class="ln">8</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/agents</span></p>
<p class="endpoint-desc">List all agents for the authenticated user. Supports pagination via <code>?page=1&amp;per_page=20</code>.</p>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"data"</span>: [{ <span class="cyan">"id"</span>: <span class="str">"agt_a1b2c3"</span>, <span class="cyan">"name"</span>: <span class="str">"trading-bot-alpha"</span>, <span class="cyan">"status"</span>: <span class="str">"active"</span> }],
<span class="ln">3</span>  <span class="cyan">"total"</span>: <span class="num">1</span>,
<span class="ln">4</span>  <span class="cyan">"page"</span>: <span class="num">1</span>,
<span class="ln">5</span>  <span class="cyan">"per_page"</span>: <span class="num">20</span>
<span class="ln">6</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/agents/{id}</span></p>
<p class="endpoint-desc">Retrieve a single agent by ID.</p>
</div>

<div class="card">
<p><span class="method method-patch">PATCH</span><span class="endpoint-path">/v1/agents/{id}</span></p>
<p class="endpoint-desc">Update agent name, type, status, or metadata.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"name"</span>: <span class="str">"trading-bot-beta"</span>,
<span class="ln">3</span>  <span class="cyan">"status"</span>: <span class="str">"paused"</span>
<span class="ln">4</span>}</code></pre></div>
</div>
</section>

<!-- ========== WALLETS ========== -->
<section id="wallets">
<h2>// Wallets API</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/wallets</span></p>
<p class="endpoint-desc">Create an additional wallet for an agent. Supports <code>solana</code> and <code>evm</code> chains.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"agent_id"</span>: <span class="str">"agt_a1b2c3"</span>,
<span class="ln">3</span>  <span class="cyan">"chain"</span>: <span class="str">"solana"</span>,
<span class="ln">4</span>  <span class="cyan">"label"</span>: <span class="str">"hot-wallet"</span>
<span class="ln">5</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"id"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">3</span>  <span class="cyan">"agent_id"</span>: <span class="str">"agt_a1b2c3"</span>,
<span class="ln">4</span>  <span class="cyan">"chain"</span>: <span class="str">"solana"</span>,
<span class="ln">5</span>  <span class="cyan">"address"</span>: <span class="str">"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU"</span>,
<span class="ln">6</span>  <span class="cyan">"label"</span>: <span class="str">"hot-wallet"</span>
<span class="ln">7</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/wallets</span></p>
<p class="endpoint-desc">List all wallets. Filter by <code>?agent_id=</code> or <code>?chain=</code>.</p>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/wallets/{id}</span></p>
<p class="endpoint-desc">Get wallet details including address and chain.</p>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/wallets/{id}/balance</span></p>
<p class="endpoint-desc">Query on-chain balance for the wallet. Returns native and token balances.</p>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"wallet_id"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">3</span>  <span class="cyan">"native"</span>: { <span class="cyan">"symbol"</span>: <span class="str">"SOL"</span>, <span class="cyan">"balance"</span>: <span class="str">"2.450000000"</span> },
<span class="ln">4</span>  <span class="cyan">"tokens"</span>: []
<span class="ln">5</span>}</code></pre></div>
</div>
</section>

<!-- ========== TRANSACTIONS ========== -->
<section id="transactions">
<h2>// Transactions API</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/transactions/transfer-sol</span></p>
<p class="endpoint-desc">Transfer SOL from an agent wallet to a destination address. Policy rules are evaluated before execution.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"from_wallet"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">3</span>  <span class="cyan">"to_address"</span>: <span class="str">"9aE2Cj..."</span>,
<span class="ln">4</span>  <span class="cyan">"amount_sol"</span>: <span class="num">0.5</span>,
<span class="ln">5</span>  <span class="cyan">"memo"</span>: <span class="str">"Payment for data feed"</span>
<span class="ln">6</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"id"</span>: <span class="str">"tx_m3n4o5"</span>,
<span class="ln">3</span>  <span class="cyan">"status"</span>: <span class="str">"confirmed"</span>,
<span class="ln">4</span>  <span class="cyan">"signature"</span>: <span class="str">"5UfgJ3..."</span>,
<span class="ln">5</span>  <span class="cyan">"amount_sol"</span>: <span class="num">0.5</span>,
<span class="ln">6</span>  <span class="cyan">"fee_sol"</span>: <span class="num">0.000005</span>
<span class="ln">7</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/transactions/batch-transfer</span></p>
<p class="endpoint-desc">Send SOL to multiple recipients in a single request. Atomic &mdash; all or nothing.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"from_wallet"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">3</span>  <span class="cyan">"transfers"</span>: [
<span class="ln">4</span>    { <span class="cyan">"to_address"</span>: <span class="str">"9aE2..."</span>, <span class="cyan">"amount_sol"</span>: <span class="num">0.1</span> },
<span class="ln">5</span>    { <span class="cyan">"to_address"</span>: <span class="str">"4bF7..."</span>, <span class="cyan">"amount_sol"</span>: <span class="num">0.2</span> }
<span class="ln">6</span>  ]
<span class="ln">7</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/transactions</span></p>
<p class="endpoint-desc">List transactions. Filter by <code>?wallet_id=</code>, <code>?status=</code>, <code>?from=</code>, <code>?to=</code> (date range).</p>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/transactions/{id}</span></p>
<p class="endpoint-desc">Get transaction details including on-chain signature and confirmation status.</p>
</div>
</section>

<!-- ========== ESCROW ========== -->
<section id="escrow">
<h2>// Escrow API</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/escrow</span></p>
<p class="endpoint-desc">Create a new escrow. Funds are locked until released, refunded, or disputed.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"payer_wallet"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">3</span>  <span class="cyan">"payee_wallet"</span>: <span class="str">"wal_p4q5r6"</span>,
<span class="ln">4</span>  <span class="cyan">"amount_sol"</span>: <span class="num">1.0</span>,
<span class="ln">5</span>  <span class="cyan">"conditions"</span>: { <span class="cyan">"type"</span>: <span class="str">"task_completion"</span> },
<span class="ln">6</span>  <span class="cyan">"expires_at"</span>: <span class="str">"2026-02-20T00:00:00Z"</span>
<span class="ln">7</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"id"</span>: <span class="str">"esc_j1k2l3"</span>,
<span class="ln">3</span>  <span class="cyan">"status"</span>: <span class="str">"funded"</span>,
<span class="ln">4</span>  <span class="cyan">"amount_sol"</span>: <span class="num">1.0</span>,
<span class="ln">5</span>  <span class="cyan">"payer_wallet"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">6</span>  <span class="cyan">"payee_wallet"</span>: <span class="str">"wal_p4q5r6"</span>
<span class="ln">7</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/escrow</span></p>
<p class="endpoint-desc">List all escrows for the authenticated user.</p>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/escrow/{id}</span></p>
<p class="endpoint-desc">Get escrow details and current status.</p>
</div>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/escrow/{id}/action</span></p>
<p class="endpoint-desc">Execute an action on an escrow: <code>release</code>, <code>refund</code>, or <code>dispute</code>.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"action"</span>: <span class="str">"release"</span>,
<span class="ln">3</span>  <span class="cyan">"reason"</span>: <span class="str">"Task completed successfully"</span>
<span class="ln">4</span>}</code></pre></div>
</div>

<h3>Escrow State Machine</h3>
<div class="ascii">
  +----------+     fund      +---------+
  | CREATED  | ------------> | FUNDED  |
  +----------+               +---------+
                              /   |   \
                     release /    |    \ refund
                            /     |     \
                   +----------+   |   +----------+
                   | RELEASED |   |   | REFUNDED |
                   +----------+   |   +----------+
                                  | dispute
                                  v
                            +-----------+
                            | DISPUTED  |
                            +-----------+
                              /       \
                     resolve /         \ resolve
                            v           v
                   +----------+   +----------+
                   | RELEASED |   | REFUNDED |
                   +----------+   +----------+</div>
</section>

<!-- ========== POLICIES ========== -->
<section id="policies">
<h2>// Policies API</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/policies</span></p>
<p class="endpoint-desc">Create a policy with one or more rules that constrain agent transactions.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"name"</span>: <span class="str">"conservative-limits"</span>,
<span class="ln">3</span>  <span class="cyan">"agent_id"</span>: <span class="str">"agt_a1b2c3"</span>,
<span class="ln">4</span>  <span class="cyan">"rules"</span>: [
<span class="ln">5</span>    { <span class="cyan">"type"</span>: <span class="str">"max_transaction_amount"</span>, <span class="cyan">"value"</span>: <span class="num">10.0</span> },
<span class="ln">6</span>    { <span class="cyan">"type"</span>: <span class="str">"daily_limit"</span>, <span class="cyan">"value"</span>: <span class="num">50.0</span> },
<span class="ln">7</span>    { <span class="cyan">"type"</span>: <span class="str">"whitelist"</span>, <span class="cyan">"addresses"</span>: [<span class="str">"9aE2..."</span>] }
<span class="ln">8</span>  ]
<span class="ln">9</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/policies</span></p>
<p class="endpoint-desc">List all policies. Filter by <code>?agent_id=</code>.</p>
</div>

<div class="card">
<p><span class="method method-patch">PATCH</span><span class="endpoint-path">/v1/policies/{id}</span></p>
<p class="endpoint-desc">Update policy rules or status.</p>
</div>

<div class="card">
<p><span class="method method-delete">DELETE</span><span class="endpoint-path">/v1/policies/{id}</span></p>
<p class="endpoint-desc">Delete a policy. Agent transactions will no longer be constrained by these rules.</p>
</div>

<h3>Policy Rule Types</h3>
<table class="tbl">
<tr><th>Rule Type</th><th>Description</th></tr>
<tr><td style="color:var(--green)">max_transaction_amount</td><td>Maximum SOL per single transaction</td></tr>
<tr><td style="color:var(--green)">daily_limit</td><td>Maximum total SOL an agent can spend per day</td></tr>
<tr><td style="color:var(--green)">whitelist</td><td>Only allow transfers to approved addresses</td></tr>
<tr><td style="color:var(--green)">blacklist</td><td>Block transfers to specific addresses</td></tr>
<tr><td style="color:var(--green)">time_window</td><td>Only allow transactions during certain hours (UTC)</td></tr>
<tr><td style="color:var(--green)">rate_limit</td><td>Max number of transactions per time period</td></tr>
<tr><td style="color:var(--green)">require_approval</td><td>Human-in-the-loop approval for transactions above threshold</td></tr>
</table>
</section>

<!-- ========== ANALYTICS ========== -->
<section id="analytics">
<h2>// Analytics &amp; Compliance</h2>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/analytics/summary</span></p>
<p class="endpoint-desc">Aggregate stats: total volume, transaction count, active agents, and top wallets.</p>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"total_volume_sol"</span>: <span class="num">1842.5</span>,
<span class="ln">3</span>  <span class="cyan">"total_transactions"</span>: <span class="num">347</span>,
<span class="ln">4</span>  <span class="cyan">"active_agents"</span>: <span class="num">12</span>,
<span class="ln">5</span>  <span class="cyan">"active_wallets"</span>: <span class="num">18</span>
<span class="ln">6</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/analytics/daily</span></p>
<p class="endpoint-desc">Daily breakdown of volume and transactions. Query params: <code>?from=</code>, <code>?to=</code> (ISO dates).</p>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/compliance/audit-log</span></p>
<p class="endpoint-desc">Full audit trail of all actions. Immutable, append-only log with actor, action, resource, and timestamp.</p>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"data"</span>: [
<span class="ln">3</span>    {
<span class="ln">4</span>      <span class="cyan">"id"</span>: <span class="str">"log_001"</span>,
<span class="ln">5</span>      <span class="cyan">"actor"</span>: <span class="str">"agt_a1b2c3"</span>,
<span class="ln">6</span>      <span class="cyan">"action"</span>: <span class="str">"transaction.create"</span>,
<span class="ln">7</span>      <span class="cyan">"resource"</span>: <span class="str">"tx_m3n4o5"</span>,
<span class="ln">8</span>      <span class="cyan">"timestamp"</span>: <span class="str">"2026-02-12T10:30:00Z"</span>
<span class="ln">9</span>    }
<span class="ln">10</span>  ]
<span class="ln">11</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/compliance/anomalies</span></p>
<p class="endpoint-desc">Flagged suspicious patterns: unusual volume spikes, new destination addresses, off-hours activity.</p>
</div>
</section>

<!-- ========== WEBHOOKS ========== -->
<section id="webhooks">
<h2>// Webhooks</h2>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/webhooks</span></p>
<p class="endpoint-desc">Register a webhook URL to receive real-time event notifications.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"url"</span>: <span class="str">"https://myapp.com/webhooks/aw"</span>,
<span class="ln">3</span>  <span class="cyan">"events"</span>: [<span class="str">"transaction.confirmed"</span>, <span class="str">"escrow.released"</span>],
<span class="ln">4</span>  <span class="cyan">"secret"</span>: <span class="str">"whsec_..."</span>
<span class="ln">5</span>}</code></pre></div>
</div>

<h3>Event Types</h3>
<table class="tbl">
<tr><th>Event</th><th>Description</th></tr>
<tr><td style="color:var(--green)">transaction.created</td><td>Transaction submitted to chain</td></tr>
<tr><td style="color:var(--green)">transaction.confirmed</td><td>Transaction confirmed on-chain</td></tr>
<tr><td style="color:var(--green)">transaction.failed</td><td>Transaction failed or reverted</td></tr>
<tr><td style="color:var(--green)">escrow.created</td><td>New escrow funded</td></tr>
<tr><td style="color:var(--green)">escrow.released</td><td>Escrow funds released to payee</td></tr>
<tr><td style="color:var(--green)">escrow.refunded</td><td>Escrow funds returned to payer</td></tr>
<tr><td style="color:var(--green)">escrow.disputed</td><td>Escrow disputed by a party</td></tr>
<tr><td style="color:var(--green)">agent.created</td><td>New agent provisioned</td></tr>
<tr><td style="color:var(--green)">policy.violated</td><td>Transaction blocked by policy rule</td></tr>
<tr><td style="color:var(--green)">anomaly.detected</td><td>Compliance engine flagged an anomaly</td></tr>
</table>
</section>

<!-- ========== MARKETPLACE ========== -->
<section id="marketplace">
<h2>// Marketplace &amp; x402</h2>

<h3>Marketplace</h3>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/marketplace/services</span></p>
<p class="endpoint-desc">List an agent service on the marketplace for other agents to hire.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"agent_id"</span>: <span class="str">"agt_a1b2c3"</span>,
<span class="ln">3</span>  <span class="cyan">"name"</span>: <span class="str">"Sentiment Analysis"</span>,
<span class="ln">4</span>  <span class="cyan">"description"</span>: <span class="str">"Real-time crypto sentiment from X/Twitter"</span>,
<span class="ln">5</span>  <span class="cyan">"price_sol"</span>: <span class="num">0.01</span>,
<span class="ln">6</span>  <span class="cyan">"category"</span>: <span class="str">"data"</span>
<span class="ln">7</span>}</code></pre></div>
</div>

<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/marketplace/services</span></p>
<p class="endpoint-desc">Browse available agent services. Filter by <code>?category=</code>, <code>?min_price=</code>, <code>?max_price=</code>.</p>
</div>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/marketplace/hire</span></p>
<p class="endpoint-desc">Hire an agent service. Creates an escrow and triggers the provider agent.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"service_id"</span>: <span class="str">"svc_d4e5f6"</span>,
<span class="ln">3</span>  <span class="cyan">"payer_wallet"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">4</span>  <span class="cyan">"parameters"</span>: { <span class="cyan">"query"</span>: <span class="str">"$SOL sentiment"</span> }
<span class="ln">5</span>}</code></pre></div>
</div>

<h3>x402 Protocol</h3>

<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/x402/pay</span></p>
<p class="endpoint-desc">HTTP 402 payment protocol. Pay for API access using x402 payment headers.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"wallet_id"</span>: <span class="str">"wal_x9y8z7"</span>,
<span class="ln">3</span>  <span class="cyan">"target_url"</span>: <span class="str">"https://api.example.com/data"</span>,
<span class="ln">4</span>  <span class="cyan">"max_price_sol"</span>: <span class="num">0.001</span>
<span class="ln">5</span>}</code></pre></div>
</div>
</section>

<!-- ========== PDA WALLETS ========== -->
<section id="pda-wallets">
<h2>// PDA Wallets <span style="font-size:11px;color:#e040fb;margin-left:8px;letter-spacing:2px">BETA &mdash; DEVNET</span></h2>

<div class="card" style="border-left:3px solid #00d4ff">
<p style="color:#00d4ff;font-size:14px;font-weight:700;margin-bottom:8px">On-Chain Program Derived Address Wallets</p>
<p style="font-size:12px;margin-bottom:12px">PDA wallets are Solana-native wallets controlled by the AgentWallet Anchor program. No private keys needed &mdash; the wallet address is derived deterministically from seeds.</p>
<p style="font-size:11px;color:#555">Program ID: <span style="color:#00ff41">CEQLGCWkpUjbsh5kZujTaCkFB59EKxmnhsqydDzpt6r6</span> (Devnet)</p>
<p style="font-size:11px;color:#555;margin-top:4px">Seeds: <span style="color:#ffcc00">["agent_wallet", org_pubkey, agent_id_seed]</span></p>
</div>

<h3>Architecture</h3>
<div style="background:#0d0d0d;border:1px solid #1a1a1a;border-radius:6px;padding:16px;font-size:11px;color:#00d4ff;overflow-x:auto;white-space:pre;line-height:1.5;margin:12px 0">
  SDK / HTTP Request
       |
       v
  AgentWallet API (FastAPI)
       |
       v
  Build Anchor Instruction
  (Borsh serialize args + 8-byte discriminator)
       |
       v
  Sign with Authority Keypair (decrypted from KMS)
       |
       v
  Submit to Solana RPC (devnet)
       |
       v
  On-chain: AgentWallet PDA created/updated
  - Per-tx spending limit enforced
  - Daily spending limit enforced (UTC reset)
  - Platform fee deducted atomically</div>

<h3>Create PDA Wallet</h3>
<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/pda-wallets</span></p>
<p class="endpoint-desc">Create a new PDA wallet on-chain with spending limits. The PDA address is derived from the authority's pubkey and agent_id_seed.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"authority_wallet_id"</span>: <span class="str">"uuid-of-authority-wallet"</span>,
<span class="ln">3</span>  <span class="cyan">"agent_id_seed"</span>: <span class="str">"trading-bot-v1"</span>,
<span class="ln">4</span>  <span class="cyan">"spending_limit_per_tx"</span>: <span class="num">500000000</span>,
<span class="ln">5</span>  <span class="cyan">"daily_limit"</span>: <span class="num">2000000000</span>,
<span class="ln">6</span>  <span class="cyan">"agent_id"</span>: <span class="str">"uuid-of-agent (optional)"</span>
<span class="ln">7</span>}</code></pre></div>
<h4>Response 201</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln"> 1</span>{
<span class="ln"> 2</span>  <span class="cyan">"id"</span>: <span class="str">"pda-wallet-uuid"</span>,
<span class="ln"> 3</span>  <span class="cyan">"org_id"</span>: <span class="str">"org-uuid"</span>,
<span class="ln"> 4</span>  <span class="cyan">"pda_address"</span>: <span class="str">"7xKXtg2CW87d97TXJSDpbD..."</span>,
<span class="ln"> 5</span>  <span class="cyan">"authority_wallet_id"</span>: <span class="str">"uuid"</span>,
<span class="ln"> 6</span>  <span class="cyan">"agent_id_seed"</span>: <span class="str">"trading-bot-v1"</span>,
<span class="ln"> 7</span>  <span class="cyan">"spending_limit_per_tx"</span>: <span class="num">500000000</span>,
<span class="ln"> 8</span>  <span class="cyan">"daily_limit"</span>: <span class="num">2000000000</span>,
<span class="ln"> 9</span>  <span class="cyan">"bump"</span>: <span class="num">254</span>,
<span class="ln">10</span>  <span class="cyan">"is_active"</span>: <span class="num">true</span>,
<span class="ln">11</span>  <span class="cyan">"tx_signature"</span>: <span class="str">"5UfgJ3vBxTG..."</span>,
<span class="ln">12</span>  <span class="cyan">"created_at"</span>: <span class="str">"2026-02-16T10:00:00Z"</span>
<span class="ln">13</span>}</code></pre></div>
<h4>Parameters</h4>
<table class="tbl">
<tr><th>Field</th><th>Type</th><th>Description</th></tr>
<tr><td style="color:#00ff41">authority_wallet_id</td><td>UUID</td><td>The wallet that will sign PDA transactions (must have SOL for rent)</td></tr>
<tr><td style="color:#00ff41">agent_id_seed</td><td>string (1-64)</td><td>Unique seed for PDA derivation. Same seed = same PDA address.</td></tr>
<tr><td style="color:#00ff41">spending_limit_per_tx</td><td>int (lamports)</td><td>Maximum lamports per single transfer (1 SOL = 1,000,000,000)</td></tr>
<tr><td style="color:#00ff41">daily_limit</td><td>int (lamports)</td><td>Maximum total lamports per UTC day</td></tr>
<tr><td style="color:#00ff41">agent_id</td><td>UUID (optional)</td><td>Link to an existing agent</td></tr>
</table>
</div>

<h3>List PDA Wallets</h3>
<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/pda-wallets?limit=50&amp;offset=0</span></p>
<p class="endpoint-desc">List all PDA wallets for the authenticated organization. Supports pagination.</p>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"data"</span>: [{ <span class="cyan">"id"</span>: <span class="str">"..."</span>, <span class="cyan">"pda_address"</span>: <span class="str">"..."</span>, <span class="cyan">"is_active"</span>: <span class="num">true</span> }],
<span class="ln">3</span>  <span class="cyan">"total"</span>: <span class="num">5</span>
<span class="ln">4</span>}</code></pre></div>
</div>

<h3>Get PDA Wallet</h3>
<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/pda-wallets/{wallet_id}</span></p>
<p class="endpoint-desc">Get a PDA wallet by UUID.</p>
</div>

<h3>Read On-Chain State</h3>
<div class="card">
<p><span class="method method-get">GET</span><span class="endpoint-path">/v1/pda-wallets/{wallet_id}/state</span></p>
<p class="endpoint-desc">Read live on-chain state of the PDA wallet directly from Solana. Returns deserialized Anchor account data + SOL balance.</p>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln"> 1</span>{
<span class="ln"> 2</span>  <span class="cyan">"pda_address"</span>: <span class="str">"7xKXtg2CW87d..."</span>,
<span class="ln"> 3</span>  <span class="cyan">"authority"</span>: <span class="str">"AuthPubkey..."</span>,
<span class="ln"> 4</span>  <span class="cyan">"org"</span>: <span class="str">"OrgPubkey..."</span>,
<span class="ln"> 5</span>  <span class="cyan">"agent_id"</span>: <span class="str">"trading-bot-v1"</span>,
<span class="ln"> 6</span>  <span class="cyan">"spending_limit_per_tx"</span>: <span class="num">500000000</span>,
<span class="ln"> 7</span>  <span class="cyan">"daily_limit"</span>: <span class="num">2000000000</span>,
<span class="ln"> 8</span>  <span class="cyan">"daily_spent"</span>: <span class="num">100000000</span>,
<span class="ln"> 9</span>  <span class="cyan">"last_reset_day"</span>: <span class="num">20504</span>,
<span class="ln">10</span>  <span class="cyan">"is_active"</span>: <span class="num">true</span>,
<span class="ln">11</span>  <span class="cyan">"bump"</span>: <span class="num">254</span>,
<span class="ln">12</span>  <span class="cyan">"sol_balance"</span>: <span class="num">1.85</span>
<span class="ln">13</span>}</code></pre></div>
</div>

<h3>Transfer with Limits</h3>
<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/pda-wallets/{wallet_id}/transfer</span></p>
<p class="endpoint-desc">Execute a SOL transfer through the PDA wallet. The Anchor program enforces per-tx and daily limits on-chain.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"recipient"</span>: <span class="str">"9aE2CjGpK4bD..."</span>,
<span class="ln">3</span>  <span class="cyan">"amount_lamports"</span>: <span class="num">100000000</span>
<span class="ln">4</span>}</code></pre></div>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"signature"</span>: <span class="str">"4kR9vBxTG..."</span>,
<span class="ln">3</span>  <span class="cyan">"confirmed"</span>: <span class="num">true</span>
<span class="ln">4</span>}</code></pre></div>
<h4>On-Chain Enforcement</h4>
<table class="tbl">
<tr><th>Check</th><th>Condition</th><th>Error if violated</th></tr>
<tr><td style="color:#00ff41">Active</td><td>is_active == true</td><td>WalletInactive</td></tr>
<tr><td style="color:#00ff41">Per-TX Limit</td><td>amount &lt;= spending_limit_per_tx</td><td>ExceedsTransactionLimit</td></tr>
<tr><td style="color:#00ff41">Daily Limit</td><td>daily_spent + amount &lt;= daily_limit</td><td>ExceedsDailyLimit</td></tr>
<tr><td style="color:#00ff41">Daily Reset</td><td>Auto-resets daily_spent at UTC midnight</td><td>&mdash;</td></tr>
</table>
</div>

<h3>Update Limits</h3>
<div class="card">
<p><span class="method method-patch">PATCH</span><span class="endpoint-path">/v1/pda-wallets/{wallet_id}/limits</span></p>
<p class="endpoint-desc">Update spending limits and active status on-chain. Supports partial updates.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"spending_limit_per_tx"</span>: <span class="num">1000000000</span>,
<span class="ln">3</span>  <span class="cyan">"daily_limit"</span>: <span class="num">5000000000</span>,
<span class="ln">4</span>  <span class="cyan">"is_active"</span>: <span class="num">true</span>
<span class="ln">5</span>}</code></pre></div>
</div>

<h3>Derive PDA Address</h3>
<div class="card">
<p><span class="method method-post">POST</span><span class="endpoint-path">/v1/pda-wallets/derive</span></p>
<p class="endpoint-desc">Derive a PDA address from org pubkey and agent ID seed. Pure computation, no RPC call needed.</p>
<h4>Request Body</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"org_pubkey"</span>: <span class="str">"7xKXtg2CW87d..."</span>,
<span class="ln">3</span>  <span class="cyan">"agent_id_seed"</span>: <span class="str">"trading-bot-v1"</span>
<span class="ln">4</span>}</code></pre></div>
<h4>Response 200</h4>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>{
<span class="ln">2</span>  <span class="cyan">"pda_address"</span>: <span class="str">"DerivedPDAaddress..."</span>,
<span class="ln">3</span>  <span class="cyan">"bump"</span>: <span class="num">254</span>
<span class="ln">4</span>}</code></pre></div>
</div>

<h3>Python SDK</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln"> 1</span><span class="kw">from</span> agentwallet <span class="kw">import</span> AgentWallet
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kw">async with</span> <span class="fn">AgentWallet</span>(api_key=<span class="str">"aw_live_..."</span>) <span class="kw">as</span> aw:
<span class="ln"> 4</span>    <span class="cmt"># Create PDA wallet</span>
<span class="ln"> 5</span>    pda = <span class="kw">await</span> aw.pda_wallets.<span class="fn">create</span>(
<span class="ln"> 6</span>        authority_wallet_id=<span class="str">"wallet-uuid"</span>,
<span class="ln"> 7</span>        agent_id_seed=<span class="str">"my-agent-v1"</span>,
<span class="ln"> 8</span>        spending_limit_per_tx=<span class="num">500_000_000</span>,
<span class="ln"> 9</span>        daily_limit=<span class="num">2_000_000_000</span>,
<span class="ln">10</span>    )
<span class="ln">11</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"PDA Address: {pda.pda_address}"</span>)
<span class="ln">12</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"Bump: {pda.bump}"</span>)
<span class="ln">13</span>
<span class="ln">14</span>    <span class="cmt"># Transfer</span>
<span class="ln">15</span>    tx = <span class="kw">await</span> aw.pda_wallets.<span class="fn">transfer</span>(
<span class="ln">16</span>        pda.id,
<span class="ln">17</span>        recipient=<span class="str">"recipient-pubkey"</span>,
<span class="ln">18</span>        amount_lamports=<span class="num">100_000_000</span>,
<span class="ln">19</span>    )
<span class="ln">20</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"Signature: {tx.signature}"</span>)
<span class="ln">21</span>
<span class="ln">22</span>    <span class="cmt"># Read on-chain state</span>
<span class="ln">23</span>    state = <span class="kw">await</span> aw.pda_wallets.<span class="fn">get_state</span>(pda.id)
<span class="ln">24</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"Daily spent: {state.daily_spent}"</span>)
<span class="ln">25</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"SOL balance: {state.sol_balance}"</span>)
<span class="ln">26</span>
<span class="ln">27</span>    <span class="cmt"># Update limits</span>
<span class="ln">28</span>    <span class="kw">await</span> aw.pda_wallets.<span class="fn">update_limits</span>(
<span class="ln">29</span>        pda.id,
<span class="ln">30</span>        spending_limit_per_tx=<span class="num">1_000_000_000</span>,
<span class="ln">31</span>        daily_limit=<span class="num">5_000_000_000</span>,
<span class="ln">32</span>    )
<span class="ln">33</span>
<span class="ln">34</span>    <span class="cmt"># Derive address (pure, no RPC)</span>
<span class="ln">35</span>    derived = <span class="kw">await</span> aw.pda_wallets.<span class="fn">derive_address</span>(
<span class="ln">36</span>        org_pubkey=<span class="str">"your-org-pubkey"</span>,
<span class="ln">37</span>        agent_id_seed=<span class="str">"my-agent-v1"</span>,
<span class="ln">38</span>    )
<span class="ln">39</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"Predicted address: {derived.pda_address}"</span>)
<span class="ln">40</span>
<span class="ln">41</span>    <span class="cmt"># List all PDA wallets</span>
<span class="ln">42</span>    wallets = <span class="kw">await</span> aw.pda_wallets.<span class="fn">list</span>(limit=<span class="num">50</span>)
<span class="ln">43</span>    <span class="kw">for</span> w <span class="kw">in</span> wallets.data:
<span class="ln">44</span>        <span class="fn">print</span>(<span class="kw">f</span><span class="str">"  {w.pda_address[:16]}... active={w.is_active}"</span>)</code></pre></div>

<h3>Quickstart: Devnet in 60 Seconds</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span><span class="cmt"># 1. Install SDK</span>
<span class="ln">2</span>pip install aw-protocol-sdk==0.4.0
<span class="ln">3</span>
<span class="ln">4</span><span class="cmt"># 2. Register &amp; get API key</span>
<span class="ln">5</span>curl -X POST https://api.agentwallet.fun/v1/auth/register \
<span class="ln">6</span>  -H "Content-Type: application/json" \
<span class="ln">7</span>  -d '{"email":"dev@example.com","password":"SecurePass123!","name":"Dev"}'
<span class="ln">8</span>
<span class="ln">9</span><span class="cmt"># 3. Create agent + wallet, then create PDA wallet via SDK</span></code></pre></div>

</section>

<!-- ========== MCP TOOLS ========== -->
<section id="mcp-tools">
<h2>// MCP Tools</h2>
<p style="margin-bottom:16px">AgentWallet exposes 27 tools via the Model Context Protocol. Connect any MCP-compatible AI client (Claude Desktop, Cursor, etc.).</p>

<h3>MCP Config</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">json</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln"> 1</span>{
<span class="ln"> 2</span>  <span class="cyan">"mcpServers"</span>: {
<span class="ln"> 3</span>    <span class="cyan">"agentwallet"</span>: {
<span class="ln"> 4</span>      <span class="cyan">"command"</span>: <span class="str">"uvx"</span>,
<span class="ln"> 5</span>      <span class="cyan">"args"</span>: [<span class="str">"aw-protocol-sdk"</span>],
<span class="ln"> 6</span>      <span class="cyan">"env"</span>: {
<span class="ln"> 7</span>        <span class="cyan">"AW_API_KEY"</span>: <span class="str">"aw_live_..."</span>,
<span class="ln"> 8</span>        <span class="cyan">"AW_BASE_URL"</span>: <span class="str">"https://api.agentwallet.fun"</span>
<span class="ln"> 9</span>      }
<span class="ln">10</span>    }
<span class="ln">11</span>  }
<span class="ln">12</span>}</code></pre></div>

<h3>All 27 Tools</h3>
<table class="tbl">
<tr><th>#</th><th>Tool Name</th><th>Description</th></tr>
<tr><td><span class="num">1</span></td><td style="color:var(--green)">register</td><td>Create a new account</td></tr>
<tr><td><span class="num">2</span></td><td style="color:var(--green)">login</td><td>Authenticate and get JWT</td></tr>
<tr><td><span class="num">3</span></td><td style="color:var(--green)">create_api_key</td><td>Generate API key</td></tr>
<tr><td><span class="num">4</span></td><td style="color:var(--green)">create_agent</td><td>Provision a new agent</td></tr>
<tr><td><span class="num">5</span></td><td style="color:var(--green)">list_agents</td><td>List all agents</td></tr>
<tr><td><span class="num">6</span></td><td style="color:var(--green)">get_agent</td><td>Get agent details</td></tr>
<tr><td><span class="num">7</span></td><td style="color:var(--green)">update_agent</td><td>Update agent properties</td></tr>
<tr><td><span class="num">8</span></td><td style="color:var(--green)">create_wallet</td><td>Create a new wallet</td></tr>
<tr><td><span class="num">9</span></td><td style="color:var(--green)">list_wallets</td><td>List all wallets</td></tr>
<tr><td><span class="num">10</span></td><td style="color:var(--green)">get_wallet</td><td>Get wallet details</td></tr>
<tr><td><span class="num">11</span></td><td style="color:var(--green)">get_balance</td><td>Query wallet balance</td></tr>
<tr><td><span class="num">12</span></td><td style="color:var(--green)">transfer_sol</td><td>Transfer SOL</td></tr>
<tr><td><span class="num">13</span></td><td style="color:var(--green)">batch_transfer</td><td>Batch transfer to multiple recipients</td></tr>
<tr><td><span class="num">14</span></td><td style="color:var(--green)">list_transactions</td><td>List transactions with filters</td></tr>
<tr><td><span class="num">15</span></td><td style="color:var(--green)">get_transaction</td><td>Get transaction details</td></tr>
<tr><td><span class="num">16</span></td><td style="color:var(--green)">create_escrow</td><td>Create and fund escrow</td></tr>
<tr><td><span class="num">17</span></td><td style="color:var(--green)">list_escrows</td><td>List all escrows</td></tr>
<tr><td><span class="num">18</span></td><td style="color:var(--green)">get_escrow</td><td>Get escrow details</td></tr>
<tr><td><span class="num">19</span></td><td style="color:var(--green)">escrow_action</td><td>Release, refund, or dispute</td></tr>
<tr><td><span class="num">20</span></td><td style="color:var(--green)">create_policy</td><td>Create transaction policy</td></tr>
<tr><td><span class="num">21</span></td><td style="color:var(--green)">list_policies</td><td>List all policies</td></tr>
<tr><td><span class="num">22</span></td><td style="color:var(--green)">update_policy</td><td>Update policy rules</td></tr>
<tr><td><span class="num">23</span></td><td style="color:var(--green)">delete_policy</td><td>Delete a policy</td></tr>
<tr><td><span class="num">24</span></td><td style="color:var(--green)">analytics_summary</td><td>Get aggregate analytics</td></tr>
<tr><td><span class="num">25</span></td><td style="color:var(--green)">analytics_daily</td><td>Get daily analytics breakdown</td></tr>
<tr><td><span class="num">26</span></td><td style="color:var(--green)">audit_log</td><td>Query compliance audit trail</td></tr>
<tr><td><span class="num">27</span></td><td style="color:var(--green)">detect_anomalies</td><td>Check for flagged anomalies</td></tr>
</table>
</section>

<!-- ========== SDKs ========== -->
<section id="sdks">
<h2>// SDKs</h2>

<div class="card">
<h3 style="margin-top:0">Python SDK</h3>
<p>Full async/await support, automatic retries, type hints, and pagination helpers.</p>
<div class="code-wrap"><div class="code-header"><span class="lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>pip install aw-protocol-sdk==0.4.0</code></pre></div>
</div>

<h3>Agents</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span><span class="kw">async with</span> <span class="fn">AgentWallet</span>(api_key=<span class="str">"aw_live_..."</span>) <span class="kw">as</span> aw:
<span class="ln">2</span>    <span class="cmt"># Create</span>
<span class="ln">3</span>    agent = <span class="kw">await</span> aw.agents.<span class="fn">create</span>(name=<span class="str">"my-agent"</span>, type=<span class="str">"trading"</span>)
<span class="ln">4</span>
<span class="ln">5</span>    <span class="cmt"># List</span>
<span class="ln">6</span>    agents = <span class="kw">await</span> aw.agents.<span class="fn">list</span>()
<span class="ln">7</span>
<span class="ln">8</span>    <span class="cmt"># Update</span>
<span class="ln">9</span>    <span class="kw">await</span> aw.agents.<span class="fn">update</span>(agent.id, status=<span class="str">"paused"</span>)</code></pre></div>

<h3>Wallets</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>    <span class="cmt"># List wallets for agent</span>
<span class="ln">2</span>    wallets = <span class="kw">await</span> aw.wallets.<span class="fn">list</span>(agent_id=agent.id)
<span class="ln">3</span>    wallet = wallets.data[<span class="num">0</span>]
<span class="ln">4</span>
<span class="ln">5</span>    <span class="cmt"># Check balance</span>
<span class="ln">6</span>    balance = <span class="kw">await</span> aw.wallets.<span class="fn">get_balance</span>(wallet.id)
<span class="ln">7</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"Balance: {balance.native.balance} SOL"</span>)</code></pre></div>

<h3>Transactions</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>    <span class="cmt"># Single transfer</span>
<span class="ln">2</span>    tx = <span class="kw">await</span> aw.transactions.<span class="fn">transfer_sol</span>(
<span class="ln">3</span>        from_wallet=wallet.id,
<span class="ln">4</span>        to_address=<span class="str">"9aE2Cj..."</span>,
<span class="ln">5</span>        amount_sol=<span class="num">1.0</span>
<span class="ln">6</span>    )
<span class="ln">7</span>
<span class="ln">8</span>    <span class="cmt"># Batch transfer</span>
<span class="ln">9</span>    batch = <span class="kw">await</span> aw.transactions.<span class="fn">batch_transfer</span>(
<span class="ln">10</span>        from_wallet=wallet.id,
<span class="ln">11</span>        transfers=[
<span class="ln">12</span>            {<span class="str">"to_address"</span>: <span class="str">"9aE2..."</span>, <span class="str">"amount_sol"</span>: <span class="num">0.1</span>},
<span class="ln">13</span>            {<span class="str">"to_address"</span>: <span class="str">"4bF7..."</span>, <span class="str">"amount_sol"</span>: <span class="num">0.2</span>},
<span class="ln">14</span>        ]
<span class="ln">15</span>    )</code></pre></div>

<h3>Escrow</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>    <span class="cmt"># Create escrow</span>
<span class="ln">2</span>    escrow = <span class="kw">await</span> aw.escrow.<span class="fn">create</span>(
<span class="ln">3</span>        payer_wallet=wallet.id,
<span class="ln">4</span>        payee_wallet=<span class="str">"wal_p4q5r6"</span>,
<span class="ln">5</span>        amount_sol=<span class="num">1.0</span>
<span class="ln">6</span>    )
<span class="ln">7</span>
<span class="ln">8</span>    <span class="cmt"># Release escrow</span>
<span class="ln">9</span>    <span class="kw">await</span> aw.escrow.<span class="fn">action</span>(escrow.id, action=<span class="str">"release"</span>)</code></pre></div>

<h3>Policies</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>    <span class="cmt"># Create policy</span>
<span class="ln">2</span>    policy = <span class="kw">await</span> aw.policies.<span class="fn">create</span>(
<span class="ln">3</span>        name=<span class="str">"safe-limits"</span>,
<span class="ln">4</span>        agent_id=agent.id,
<span class="ln">5</span>        rules=[
<span class="ln">6</span>            {<span class="str">"type"</span>: <span class="str">"max_transaction_amount"</span>, <span class="str">"value"</span>: <span class="num">5.0</span>},
<span class="ln">7</span>            {<span class="str">"type"</span>: <span class="str">"daily_limit"</span>, <span class="str">"value"</span>: <span class="num">20.0</span>},
<span class="ln">8</span>        ]
<span class="ln">9</span>    )</code></pre></div>

<h3>Analytics</h3>
<div class="code-wrap"><div class="code-header"><span class="lang">python</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
<pre><code><span class="ln">1</span>    <span class="cmt"># Summary</span>
<span class="ln">2</span>    stats = <span class="kw">await</span> aw.analytics.<span class="fn">summary</span>()
<span class="ln">3</span>    <span class="fn">print</span>(<span class="kw">f</span><span class="str">"Total volume: {stats.total_volume_sol} SOL"</span>)
<span class="ln">4</span>
<span class="ln">5</span>    <span class="cmt"># Audit log</span>
<span class="ln">6</span>    logs = <span class="kw">await</span> aw.compliance.<span class="fn">audit_log</span>(limit=<span class="num">50</span>)
<span class="ln">7</span>
<span class="ln">8</span>    <span class="cmt"># Anomaly detection</span>
<span class="ln">9</span>    anomalies = <span class="kw">await</span> aw.compliance.<span class="fn">anomalies</span>()</code></pre></div>
</section>

</main>

<!-- Back to top -->
<button class="btt" id="btt" onclick="window.scrollTo({top:0,behavior:'smooth'})">&uarr;</button>

<!-- Search overlay -->
<div class="search-overlay" id="searchOverlay">
<div class="search-box">
<input type="text" id="searchInput" placeholder="> Search documentation..." autofocus>
<div class="hint">ESC to close &middot; Type to filter sections</div>
<div class="search-results" id="searchResults"></div>
</div>
</div>

<script>
/* Matrix rain */
(function(){
  const c=document.getElementById('matrix'),ctx=c.getContext('2d');
  let w,h,cols,drops;
  function resize(){w=c.width=window.innerWidth;h=c.height=window.innerHeight;cols=Math.floor(w/14);drops=Array(cols).fill(1)}
  resize();window.addEventListener('resize',resize);
  const chars='01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½';
  function draw(){
    ctx.fillStyle='rgba(10,10,10,.05)';ctx.fillRect(0,0,w,h);
    ctx.fillStyle='#00ff41';ctx.font='12px JetBrains Mono';
    for(let i=0;i<cols;i++){
      const t=chars[Math.floor(Math.random()*chars.length)];
      ctx.fillText(t,i*14,drops[i]*14);
      if(drops[i]*14>h&&Math.random()>.975)drops[i]=0;
      drops[i]++
    }
  }
  setInterval(draw,50)
})();

/* Scroll spy */
(function(){
  const links=document.querySelectorAll('#sidebar-nav a[href^="#"]');
  const sections=[];
  links.forEach(l=>{const id=l.getAttribute('href').slice(1);const el=document.getElementById(id);if(el)sections.push({el,link:l})});
  function update(){
    let cur=sections[0];
    const st=window.scrollY+100;
    sections.forEach(s=>{if(s.el.offsetTop<=st)cur=s});
    links.forEach(l=>l.classList.remove('active'));
    if(cur)cur.link.classList.add('active');
  }
  window.addEventListener('scroll',update);update()
})();

/* Back to top */
window.addEventListener('scroll',function(){
  document.getElementById('btt').style.display=window.scrollY>400?'flex':'none'
});

/* Copy button */
function copyCode(btn){
  const pre=btn.closest('.code-wrap').querySelector('pre');
  const text=pre.textContent.replace(/^\s*\d+\s*/gm,'');
  navigator.clipboard.writeText(text.trim()).then(()=>{btn.textContent='copied!';setTimeout(()=>btn.textContent='copy',1500)})
}

/* Search */
(function(){
  const overlay=document.getElementById('searchOverlay');
  const input=document.getElementById('searchInput');
  const results=document.getElementById('searchResults');
  const sections=document.querySelectorAll('section[id]');

  function open(){overlay.classList.add('open');input.value='';input.focus();results.innerHTML=''}
  function close(){overlay.classList.remove('open')}

  document.addEventListener('keydown',function(e){
    if((e.ctrlKey||e.metaKey)&&e.key==='k'){e.preventDefault();open()}
    if(e.key==='Escape')close()
  });
  overlay.addEventListener('click',function(e){if(e.target===overlay)close()});

  input.addEventListener('input',function(){
    const q=input.value.toLowerCase().trim();
    results.innerHTML='';
    if(!q)return;
    sections.forEach(s=>{
      const text=s.textContent.toLowerCase();
      if(text.includes(q)){
        const title=s.querySelector('h2');
        const a=document.createElement('a');
        a.href='#'+s.id;
        a.textContent=title?title.textContent:s.id;
        a.addEventListener('click',close);
        results.appendChild(a)
      }
    })
  })
})();

/* Close sidebar on mobile nav click */
document.querySelectorAll('#sidebar-nav a').forEach(a=>{
  a.addEventListener('click',()=>{document.querySelector('.sidebar').classList.remove('open')})
});

/* Quest verification: track scroll depth + time for read-docs quest */
(function(){
  var startTime=Date.now(),maxScroll=0,verified=false;
  window.addEventListener('scroll',function(){
    var scrollPct=Math.round((window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100);
    if(scrollPct>maxScroll)maxScroll=scrollPct;
  });
  setInterval(function(){
    if(verified)return;
    var elapsed=Math.round((Date.now()-startTime)/1000);
    if(maxScroll>=75&&elapsed>=60){
      verified=true;
      try{
        var sb=window.supabase.createClient('https://rlajsbxsculwamkpgsmm.supabase.co','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsYWpzYnhzY3Vsd2Fta3Bnc21tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NDUwNTUsImV4cCI6MjA4NjUyMTA1NX0.3C0AxpkvFBfGsbYZQYHDE25DY4UgVPMur4c6zK5Lu7A');
        sb.auth.getSession().then(function(r){
          if(r.data.session){
            sb.from('quest_verifications').upsert({user_id:r.data.session.user.id,quest_id:'read-docs',verification_data:{scroll_pct:maxScroll,time_seconds:elapsed}},{onConflict:'user_id,quest_id'}).then(function(){});
          }
        });
      }catch(e){}
    }
  },5000);
})();

// â”€â”€ PARTICLES â”€â”€
const pc=document.getElementById('particles'),px=pc.getContext('2d');
function resP(){pc.width=innerWidth;pc.height=innerHeight}resP();addEventListener('resize',resP);
const pts=[];for(let i=0;i<60;i++)pts.push({x:Math.random()*pc.width,y:Math.random()*pc.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,r:Math.random()*1.5+.5});
function drawP(){px.clearRect(0,0,pc.width,pc.height);for(let i=0;i<pts.length;i++){const p=pts[i];p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=pc.width;if(p.x>pc.width)p.x=0;if(p.y<0)p.y=pc.height;if(p.y>pc.height)p.y=0;px.beginPath();px.arc(p.x,p.y,p.r,0,Math.PI*2);px.fillStyle='rgba(0,255,65,0.5)';px.fill();for(let j=i+1;j<pts.length;j++){const q=pts[j],dx=p.x-q.x,dy=p.y-q.y,d=Math.sqrt(dx*dx+dy*dy);if(d<120){px.beginPath();px.moveTo(p.x,p.y);px.lineTo(q.x,q.y);px.strokeStyle='rgba(0,255,65,'+(1-d/120)*.1+')';px.lineWidth=.5;px.stroke()}}}requestAnimationFrame(drawP)}drawP();

// â”€â”€ SCROLL PROGRESS â”€â”€
addEventListener('scroll',()=>{const h=document.documentElement.scrollHeight-innerHeight;document.getElementById('scroll-prog').style.width=(scrollY/h*100)+'%'});

// â”€â”€ BOOT SEQUENCE â”€â”€
(async function(){
  const lines=document.querySelectorAll('.boot-line');
  for(let i=0;i<lines.length;i++){
    await new Promise(r=>setTimeout(r,200+Math.random()*300));
    lines[i].classList.add('visible');
  }
  await new Promise(r=>setTimeout(r,600));
  document.getElementById('boot-overlay').classList.add('done');
})();

// â”€â”€ RANDOM GLITCH â”€â”€
setInterval(()=>{
  const els=document.querySelectorAll('h2,h3,.method,.sidebar nav a.active');
  if(!els.length)return;
  const el=els[Math.floor(Math.random()*els.length)];
  el.style.animation='none';el.offsetHeight;
  el.style.animation='tGlitch .15s linear';
  setTimeout(()=>{el.style.animation=''},150);
},3000+Math.random()*4000);

// â”€â”€ GLOW ON HOVER â”€â”€
document.querySelectorAll('.card,.copy-btn,.sidebar nav a,.btt').forEach(el=>{
  el.addEventListener('mouseenter',()=>{el.style.textShadow='0 0 12px rgba(0,255,65,.4)'});
  el.addEventListener('mouseleave',()=>{el.style.textShadow=''});
});
</script>
</body>
</html>
